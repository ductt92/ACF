(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3459],{3236:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return n(7369)}])},7770:function(e,r,n){"use strict";n.d(r,{Z:function(){return N}});var t=n(8565),o=n.n(t),i=n(3288),s=n(1395),a=n(2466),u=n(143),c=n(7195),l=n(3918),f=n(6387),p=n(2674),d=n(2844),m=n(5159);function h(e){var r=e.loading,n=void 0!==r&&r,t=e.children;return(0,i.jsxs)("div",{children:[n&&(0,i.jsx)("div",{className:"pointer-events-none absolute inset-0 z-[100] flex h-full w-full items-center justify-center bg-[#fff] opacity-60 ",children:(0,i.jsx)(m.Z,{})}),t]})}function v(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}function x(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,o,i=[],s=!0,a=!1;try{for(n=n.call(e);!(s=(t=n.next()).done)&&(i.push(t.value),!r||i.length!==r);s=!0);}catch(u){a=!0,o=u}finally{try{s||null==n.return||n.return()}finally{if(a)throw o}}return i}}(e,r)||function(e,r){if(!e)return;if("string"===typeof e)return v(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e){var r=e.loading,n=e.onSubmit,t=e.errorMsg,o=x(l.Z.useForm(),1)[0],s={username:[{required:!0,message:"Please input your username"},{whitespace:!0}],password:[{required:!0,message:"Password should not empty."},{whitespace:!0}]};return(0,i.jsx)("div",{children:(0,i.jsxs)("div",{className:"w-[400px] rounded-lg border-[1px] bg-white p-10 drop-shadow-2xl",children:[(0,i.jsx)("p",{className:"text-center text-2xl",children:"ACF Admin Login"}),(0,i.jsxs)("div",{className:"form__wrapper ",children:[t&&(0,i.jsx)(f.Z,{message:t,type:"error",showIcon:!0}),(0,i.jsx)(h,{loading:r,children:(0,i.jsxs)(l.Z,{className:"flex-col gap-4",form:o,name:"login_form",layout:"inline",onFinish:function(e){return n(e)},autoComplete:"off",children:[(0,i.jsx)(l.Z.Item,{name:"username",rules:s.username,children:(0,i.jsx)(p.Z,{prefix:(0,i.jsx)(u.Z,{}),size:"middle",placeholder:"username",allowClear:!0})}),(0,i.jsx)(l.Z.Item,{className:"w-100 mt-8",name:"password",rules:s.password,children:(0,i.jsx)(p.Z.Password,{prefix:(0,i.jsx)(c.Z,{}),size:"middle",placeholder:"password",type:"password",allowClear:!0})}),(0,i.jsx)(l.Z.Item,{className:"w-100 mt-12",children:(0,i.jsx)(d.Z,{type:"primary",htmlType:"submit",size:"middle",block:!0,children:"Login"})})]})})]})]})})}var y=n(4238),g=n(7190),b=n(7537);function j(e,r,n,t,o,i,s){try{var a=e[i](s),u=a.value}catch(c){return void n(c)}a.done?r(u):Promise.resolve(u).then(t,o)}var k=(0,n(6235).Z)().setItem,_={login:function(){var e,r=(e=o().mark((function e(r){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.Z.post("".concat(y.Bp).concat(y.ym),r);case 3:return(n=e.sent)&&(k(g.zi,n.tokens.access.token),k(g.z6,n.tokens.refresh.token),k(g.xR,JSON.stringify(n.user))),e.abrupt("return",n);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})),function(){var r=this,n=arguments;return new Promise((function(t,o){var i=e.apply(r,n);function s(e){j(i,t,o,s,a,"next",e)}function a(e){j(i,t,o,s,a,"throw",e)}s(void 0)}))});return function(e){return r.apply(this,arguments)}}()},Z=_;function z(e,r,n,t,o,i,s){try{var a=e[i](s),u=a.value}catch(c){return void n(c)}a.done?r(u):Promise.resolve(u).then(t,o)}function N(){var e=(0,s.useRouter)(),r=(0,a.useState)(!1),n=r[0],t=r[1],u=(0,a.useState)(""),c=u[0],l=u[1],f=function(){var r,n=(r=o().mark((function r(n){return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,t(!0),l(""),r.next=5,Z.login(n);case 5:if(r.sent){r.next=9;break}return t(!1),r.abrupt("return",l("Login fail"));case 9:t(!1),e.push(y.pQ),r.next=17;break;case 13:r.prev=13,r.t0=r.catch(0),l("Login fail"),t(!1);case 17:case"end":return r.stop()}}),r,null,[[0,13]])})),function(){var e=this,n=arguments;return new Promise((function(t,o){var i=r.apply(e,n);function s(e){z(i,t,o,s,a,"next",e)}function a(e){z(i,t,o,s,a,"throw",e)}s(void 0)}))});return function(e){return n.apply(this,arguments)}}();return(0,i.jsx)(w,{onSubmit:f,loading:n,errorMsg:c})}},7190:function(e,r,n){"use strict";n.d(r,{xR:function(){return i},z6:function(){return o},zi:function(){return t}});var t="access_token",o="refresh_token",i="user"},7369:function(e,r,n){"use strict";n.r(r),n.d(r,{__N_SSG:function(){return i}});var t=n(3288),o=(n(2466),n(7770)),i=!0;r.default=function(){return(0,t.jsx)("div",{className:"bg-container flex h-screen w-screen items-center ",children:(0,t.jsx)(o.Z,{})})}},7537:function(e,r,n){"use strict";var t=n(8565),o=n.n(t),i=n(3761),s=n.n(i),a=n(63),u=n(4633),c=n(4238),l=n(7190);function f(e,r,n,t,o,i,s){try{var a=e[i](s),u=a.value}catch(c){return void n(c)}a.done?r(u):Promise.resolve(u).then(t,o)}var p=(0,n(6235).Z)(),d=p.getItem,m=p.location,h=p.setItem,v=p.removeAll,x=s().create({baseURL:u._n,headers:{"Content-Type":"application/json"},paramsSerializer:function(e){return a.stringify(e)}});x.interceptors.request.use((function(e){var r=d(l.zi);return e.headers={Authorization:"Bearer ".concat(r)},e}),(function(e){return Promise.reject(e)})),x.interceptors.response.use((function(e){return e.data}),function(){var e,r=(e=o().mark((function e(r){var n,t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("/login"===(n=r.config).url||!r.response){e.next=24;break}if(401!==r.response.status){e.next=24;break}if(!n.retry){e.next=6;break}return v(),e.abrupt("return",m("/login"));case 6:if(d(l.z6)){e.next=10;break}return v(),e.abrupt("return",m("/login"));case 10:return e.prev=10,n.retry=!0,e.next=14,x.post(c.TD,{refreshToken:d(l.z6)});case 14:return t=e.sent,h(l.zi,t.tokens.access.token),h(l.z6,t.tokens.refresh.token),h(l.xR,JSON.stringify(t.user)),e.abrupt("return",x(n));case 21:return e.prev=21,e.t0=e.catch(10),e.abrupt("return",Promise.reject(e.t0));case 24:return"Network Error"===r.message&&r.response&&alert("Please check your internet connection and try again"),e.abrupt("return",Promise.reject(r));case 26:case"end":return e.stop()}}),e,null,[[10,21]])})),function(){var r=this,n=arguments;return new Promise((function(t,o){var i=e.apply(r,n);function s(e){f(i,t,o,s,a,"next",e)}function a(e){f(i,t,o,s,a,"throw",e)}s(void 0)}))});return function(e){return r.apply(this,arguments)}}()),r.Z=x},6235:function(e,r,n){"use strict";var t=n(7190);r.Z=function(){var e=function(e){return"".concat(null!==e&&void 0!==e?e:"local","Storage")},r=function(r,n){window[e(n)].removeItem(r)};return{getItem:function(r,n){return window[e(n)][r]},setItem:function(r,n,t){return window[e(t)].setItem(r,n),!0},removeItem:r,location:function(e){window.location.href=e},removeAll:function(){!function(e){e.forEach((function(e){r(e)}))}([t.zi,t.xR,t.z6])}}}}},function(e){e.O(0,[3840,6034,2972,9774,2888,179],(function(){return r=3236,e(e.s=r);var r}));var r=e.O();_N_E=r}]);